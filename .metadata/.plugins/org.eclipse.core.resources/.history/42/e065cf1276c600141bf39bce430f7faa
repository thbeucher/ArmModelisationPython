from ArmModel.FileReading import *
from Regression.functionApproximator_LWR import *


#Lecture des fichiers de trajectoire
data_store = {}   
data_store, nameFile, nbFile = recup_data()

#Recuperation des commandes

u1 = []
u2 = []
u3 = []
u4 = []
u5 = []
u6 = []

#uCommand[j+1] = 

#Boucle de traitement pour generer le controleur
i = 0
nbFeat = 10
funApprox = fa_lwr(nbFeat)
uCommand = {}
while i < nbFile:
    nameFileTemp = nameFile + str(i+1)
    j = 0
    #Recuperation dans des tableaux des activations musculaires
    while j < len(data_store[str(nameFileTemp + "_command")]):
        u1.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[0])
        u2.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[1])
        u3.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[2])
        u4.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[3])
        u5.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[4])
        u6.append(((data_store[str(nameFile + str(i+1) + "_command")])[j])[5])
        j += 1
    #Rangement dans un dictionnaire des differents tableaux d'activations musculaires
    uCommand["u1"] = u1
    uCommand["u2"] = u2
    uCommand["u3"] = u3
    uCommand["u4"] = u4
    uCommand["u5"] = u5
    uCommand["u6"] = u6
    #Boucle de traitement pour chaque activation musculaire
    k = 0
    while k < 6:
        funApprox.train_LWR(data_store[str(nameFileTemp + "_state")], uCommand[str("u" + str(k+1))])
    i += 1
    
    
    
    
    
    